<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Gráfico - Eletrônica</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body style="font-family: Arial, Helvetica, sans-serif;">
    <div id="texto">
        <h1>Clique nos botões para mostrar os gráficos!</h1>
    </div>

    <div>
        <h3>Gráficos Tensão / Tempo</h3>
        <button id="senoide" onclick="desenharGrafico(this)">Gráfico de função senoidal</button>
        <button id="retificador" onclick="desenharGrafico(this)">Gráfico Diodo Retificador em CA</button>
        <button id="ponte" onclick="desenharGrafico(this)">Gráfico Diodo Retificador em ponte</button>
    </div>
    <div>
        <h3>Gráficos Tensão / Corrente</h3>
        <button id="ideal" onclick="desenharGrafico(this)">Gráfico Diodo Ideal (fio)</button>
        <button id="diodo" onclick="desenharGrafico(this)">Gráfico Diodo 0,7 (barreira potencial de 0,7V)</button>
        <button id="real" onclick="desenharGrafico(this)">Gráfico Diodo Real (curva característica do diodo)</button>
        <button id="zenner" onclick="desenharGrafico(this)">Gráfico Diodo Zenner</button>
    </div>

    <div id="grafico"></div>

    <script>
        function desenharGrafico(button) {
            const coordenadasx = [];
            const coordenadasy = [];
            let dados = [];
            let layout = [];

            const A = 0;
            const B = 2;
            const C = 22;
            const D = 0;

            switch (button.id) {
                case "senoide":
                    document.getElementById("texto").innerHTML =
                    `<h2>Gráfico de uma Função Seno</h2> 
                    <p>Gráfico que aparece no ociloscópio quando mede tensão / tempo</p>`;
                    for (let i = -100; i <= 100; i += 0.001) {
                        coordenadasx.push(i);
                        coordenadasy.push(A + B * Math.sin(C * i + D));
                    }

                    dados = [{x: coordenadasx, y: coordenadasy, mode: 'lines', line: {color: 'blue'}}];
                    layout = {
                        title: 'Gráfico f(x) = A + B * seno(C*x + D)',
                        xaxis: {title: 'X', range: [-0.25, 1], zeroline: true},
                        yaxis: {title: 'Y', range: [-3, 3], zeroline: true}
                    };
                    Plotly.newPlot('grafico', dados, layout);
                    break;
                    
                case "retificador":
                    document.getElementById("texto").innerHTML =
                    `<h2>Gráfico Diodo Retificador</h2> 
                    <p>Em um circuito de CA um único diodo só deixa passar corrente no fluxo certo (diretamente polarizado),
                        então quando o sinal da tensão for negativo, a corrente é 0. É um gráfico de meia onda completa.</p>`;
                    for (let i = -100; i <= 100; i += 0.001) {
                        let sinalTensao = A + B * Math.sin(C * i + D)
                        if (i < 0) {
                            coordenadasx.push(0);
                            coordenadasy.push(0);
                        }
                        else if (sinalTensao < 0) {
                            coordenadasx.push(i);
                            coordenadasy.push(0);
                        } else {
                            coordenadasx.push(i);
                            coordenadasy.push(sinalTensao);
                        }
                    }

                    dados = [{x: coordenadasx, y: coordenadasy, mode: 'lines', line: {color: 'blue'}}];
                    layout = {
                        title: 'Gráfico de Meia Onda Completa',
                        xaxis: {title: 'Tempo', range: [-0.25, 1], zeroline: true},
                        yaxis: {title: 'Tensão (V)', range: [-3, 3], zeroline: true}
                    };
                    Plotly.newPlot('grafico', dados, layout);
                    break;

                case "ponte":
                    document.getElementById("texto").innerHTML = 
                    `<h2>Gráfico Diodo Retificador em Ponte</h2>
                    <p>A estrutura de quatro diodos em ponte permite transformação da tensão em ondas completas</p>`;

                    for (let i = -100; i <= 100; i += 0.001) {
                        let sinalTensao = A + B * Math.sin(C * i + D)
                        if (i < 0) {
                            coordenadasx.push(0);
                            coordenadasy.push(0);
                        }
                        else if (sinalTensao < 0) {
                            coordenadasx.push(i);
                            coordenadasy.push(-sinalTensao);
                        } else {
                            coordenadasx.push(i);
                            coordenadasy.push(sinalTensao);
                        }
                    }

                    dados = [{x: coordenadasx, y: coordenadasy, mode: 'lines', line: {color: 'blue'}}];
                    layout = {
                        title: 'Gráfico de Onda Completa',
                        xaxis: {title: 'Tempo', range: [-0.25, 1], zeroline: true},
                        yaxis: {title: 'Tensão (V)', range: [-3, 3], zeroline: true}
                    };
                    Plotly.newPlot('grafico', dados, layout);
                    break;

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                
                case "ideal":
                    document.getElementById("texto").innerHTML = 
                    `<h2>Gráfico Diodo Ideal</h2> 
                    <p>Não conduz com tensão menor que 0, mas a partir de 0V, ele conduz uma corrente constante</p>`;

                    for (let i = -1; i <= 10; i += 0.01) {
                        if (i <= 0) {
                            coordenadasx.push(i);
                            coordenadasy.push(0);
                        } else {
                            coordenadasx.push(0);
                            coordenadasy.push(i);
                        }
                    }

                    dados = [{x: coordenadasx, y: coordenadasy, mode: 'lines', line: {color: 'blue'}}];
                    layout = {
                        title: "Gráfico Diodo Ideal",
                        xaxis: {title: "Tensão (V)", range: [-1, 1], zeroline: true},
                        yaxis: {title: "Corrente (A)", range: [-1, 2], zeroline: true}
                    };
                    Plotly.newPlot('grafico', dados, layout);
                    break;
                
                case "diodo":
                    document.getElementById("texto").innerHTML = 
                    `<h2>Gráfico Diodo como fonte</h2>
                    <p>Não conduz com tensão menor que 0,7V, mas a partir disso, ele conduz uma corrente constante</p>`;
                    
                    tensaoDiodo = 0.7;
                    for (let i = -1; i <= 10; i += 0.01) {
                        if (i < tensaoDiodo) {
                            coordenadasx.push(i);
                            coordenadasy.push(0);
                        } else {
                            coordenadasx.push(tensaoDiodo);
                            coordenadasy.push(i);
                        }
                    }

                    dados = [{x: coordenadasx, y: coordenadasy, mode: 'lines', line: {color: 'blue'}}];
                    layout = {
                        title: "Gráfico Diodo",
                        xaxis: {title: "Tensão (V)", range: [-1, 1], zeroline: true},
                        yaxis: {title: "Corrente (A)", range: [-1, 2], zeroline: true}
                    };
                    Plotly.newPlot('grafico', dados, layout);
                    break;

                case "real":
                    document.getElementById("texto").innerHTML = 
                    `<h2>Gráfico Diodo Real</h2>
                    <p>Conduz muito pouco até que chegue no seu ponto Q (0,7V), a partir desse ponto, ele conduz normalmente</p>`;

                    for (let i = -100; i <= 100; i += 0.01) {
                        coordenadasx.push(i);
                        coordenadasy.push(1e-12 * (Math.exp(i / 0.02585) - 1));
                    }

                    dados = [{x: coordenadasx, y: coordenadasy, mode: 'lines', line: {color: 'blue'}}];
                    layout = {
                        title: 'Gráfico Diodo Real',
                        xaxis: {title: 'Tensão (V)', range: [-1, 1], zeroline: true},
                        yaxis: {title: 'Corrente (A)', range: [-1, 2], zeroline: true}
                    };
                    Plotly.newPlot('grafico', dados, layout);
                    break;

                case "zenner":
                    document.getElementById("texto").innerHTML = 
                    `<h2>Gráfico Diodo Zenner</h2>
                    <p>Diodo que funciona normalmente quando polarizado diretamente, mas quando é inversamente, ele conduz quando chega no Vz.</p>`;

                    tensaoZ = -1;
                    for (let i = -3; i <= 3; i += 0.01) {
                        coordenadasx.push(i);
                        if (i >= 0) {
                            coordenadasy.push(1e-12 * (Math.exp(i / 0.02585) - 1));
                        } else if (i <= tensaoZ) {
                            coordenadasy.push(-1e-3 * (Math.exp((Math.abs(i) - Math.abs(tensaoZ)) / 0.01) - 1));
                        } else {
                            coordenadasy.push(1e-12);
                        }
                    }

                    dados = [{x: coordenadasx, y: coordenadasy, mode: 'lines', line: {color: 'blue'}}];
                    layout = {
                        title: 'Gráfico Diodo Zenner',
                        xaxis: {title: 'Tensão (V)', range: [-2, 2], zeroline: true},
                        yaxis: {title: 'Corrente (A)', range: [-2, 2], zeroline: true}
                    };
                    Plotly.newPlot('grafico', dados, layout);
                    break;
            }
        }
    </script>
</body>
</html>